- # Modified version of https://github.com/tarellel/tailwind_views_generator/blob/main/lib/templates/devise/haml/registrations/edit.html.haml.tt
%div{class: "mx-0 overflow-hidden md:mx-auto md:max-w-md"}
  .mb-4.flex.flex-col.justify-center.rounded.bg-gray-50.px-8.pb-8.pt-6.shadow-md
    %h2.text-center.text-xl.text-black= title("Edit #{resource_name.to_s.humanize}")
    %hr.my-5/

    = form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f|
      = render 'devise/shared/error_messages', resource: resource

      .mb-4
        = f.label :email, class: 'block email text-sm font-medium text-gray-600'
        = f.email_field :email, autofocus: true, autocomplete: 'email', class: 'shadow appearance-none border border-gray-300 rounded w-full py-2 px-3 bg-white focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-400 leading-6 transition-colors duration-200 ease-in-out'

      - if devise_mapping.confirmable? && resource.pending_reconfirmation?
        %div Currently waiting confirmation for: #{resource.unconfirmed_email}

      .mb-4
        = f.label :password, class: 'block password text-sm font-medium text-gray-600'
        = f.password_field :password, autocomplete: 'new-password', class: 'shadow appearance-none border border-gray-300 rounded w-full py-2 px-3 bg-white focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-400 leading-6 transition-colors duration-200 ease-in-out'
        %p.mt-2.text-xs.italic.text-gray-700= "Leave it blank if you don't want to change it"
        - if @minimum_password_length
          %br/
          %em #{@minimum_password_length} characters minimum

      .mb-4
        = f.label :password_confirmation, class: 'block password text-sm font-medium text-gray-600'
        = f.password_field :password_confirmation, autocomplete: 'new-password', class: 'shadow appearance-none border border-gray-300 rounded w-full py-2 px-3 bg-white focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-400 leading-6 transition-colors duration-200 ease-in-out'

      .mb-4
        = f.label :current_password, class: 'block password text-sm font-medium text-gray-600'
        = f.password_field :current_password, autocomplete: 'current-password', class: 'shadow appearance-none border border-gray-300 rounded w-full py-2 px-3 bg-white focus:outline-none focus:ring-0 focus:border-blue-500 text-gray-400 leading-6 transition-colors duration-200 ease-in-out'
        %p.mt-2.text-xs.italic.text-gray-700 We need your current password to confirm your changes

        = f.submit 'Update', class: 'my-2 bg-blue-500 hover:bg-blue-700 text-white font-bold text-sm py-2 px-4 rounded w-full'
    %hr.my-5/
    = button_to 'Cancel my account', registration_path(resource_name), class: 'bg-red-500 hover:bg-red-700 my-2 text-white font-bold text-sm py-2 px-4 rounded w-full', data: { confirm: 'Are you sure? You cannot undo this.' }, method: :delete

    %hr.my-5/
    = link_to "Back", :back
